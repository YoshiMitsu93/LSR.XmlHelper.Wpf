<Window x:Class="LSR.XmlHelper.Wpf.Views.CompareXmlWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Compare XML"
        Width="980"
        Height="600"
        WindowStartupLocation="CenterOwner"
        AllowDrop="True"
        PreviewDragOver="CompareWindow_PreviewDragOver"
        Drop="CompareWindow_Drop">
	<Grid Margin="12">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="*" />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>

		<StackPanel Grid.Row="0" Margin="0,0,0,10">
			<TextBlock Text="Target XML in opened folder:" FontWeight="SemiBold" />
			<ComboBox ItemsSource="{Binding TargetFiles}"
                      SelectedItem="{Binding SelectedTarget}"
                      DisplayMemberPath="DisplayPath"
                      Margin="0,6,0,10" />

			<TextBlock Text="External XML:" FontWeight="SemiBold" />
			<DockPanel Margin="0,6,0,0" LastChildFill="True">
				<Button Content="Browse..."
                        Command="{Binding BrowseExternalCommand}"
                        MinWidth="90"
                        Margin="0,0,8,0"
                        DockPanel.Dock="Right" />
				<Button Content="Clear"
                        Command="{Binding ClearExternalCommand}"
                        MinWidth="70"
                        Margin="0,0,8,0"
                        DockPanel.Dock="Right" />
				<TextBox Text="{Binding ExternalFilePath}"
                         IsReadOnly="True"
                         VerticalContentAlignment="Center" />
			</DockPanel>

			<TextBlock Text="Tip: drag and drop an XML file into this window."
                       Margin="0,8,0,0"
                       Opacity="0.8" />
		</StackPanel>

        <DataGrid Grid.Row="1"
                  ItemsSource="{Binding Rows}"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  IsReadOnly="False"
                  SelectionMode="Extended">
            <DataGrid.Columns>
                <DataGridCheckBoxColumn Header="Import" Width="70" Binding="{Binding IsSelected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                <DataGridTextColumn Header="Change" Width="*" Binding="{Binding Display}" IsReadOnly="True" />
            </DataGrid.Columns>
        </DataGrid>
        <StackPanel Grid.Row="2" Orientation="Vertical" Margin="0,10,0,0">
            <TextBlock Text="{Binding Status}" Margin="0,0,0,6" TextWrapping="Wrap" />
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="Select All"
					        Command="{Binding SelectAllCommand}"
					        MinWidth="90"
					        Margin="0,0,8,0"
					        ToolTip="Select every change in the list for importing or applying." />
                <Button Content="Select None"
					        Command="{Binding SelectNoneCommand}"
					        MinWidth="90"
					        Margin="0,0,8,0"
					        ToolTip="Unselect every change in the list." />
                <Button Content="Import to history (Pending)"
					        Command="{Binding ImportAsPendingCommand}"
					        MinWidth="170"
					        Margin="0,0,8,0"
					        ToolTip="Add the selected changes into Saved Edits as Pending. This does not modify the XML file." />
                <Button Content="Apply now"
					        Command="{Binding ImportAndApplyCommand}"
					        MinWidth="110"
					        Margin="0,0,8,0"
					        ToolTip="Apply the selected changes to the target XML and save it. If save succeeds, the changes are recorded as Committed in Saved Edits." />
                <Button Content="Import to history (Committed)"
					        Command="{Binding ImportAsCommittedCommand}"
					        MinWidth="190"
					        ToolTip="Add the selected changes into Saved Edits as Committed. This does not modify the XML file." />
            </StackPanel>
        </StackPanel>
    </Grid>
</Window>
