<Window
    x:Class="LSR.XmlHelper.Wpf.Views.AppearanceWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:appearanceTabs="clr-namespace:LSR.XmlHelper.Wpf.Views.AppearanceTabs"
    xmlns:infra="clr-namespace:LSR.XmlHelper.Wpf.Infrastructure"
    Title="Appearance"
    Width="720"
    Height="560"
    Background="{Binding PreviewAppearanceWindowBackgroundBrush}"
    FontFamily="{Binding PreviewUiFontFamily}"
    FontSize="{Binding PreviewUiFontSize}"
    ResizeMode="CanResize"
    ShowInTaskbar="False"
    WindowStartupLocation="CenterOwner">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis" />
        <infra:InverseBooleanToVisibilityConverter x:Key="InverseBoolToVis" />
        <infra:InverseBooleanConverter x:Key="InverseBool" />
        <Style TargetType="{x:Type TextBlock}">
            <Setter Property="Foreground" Value="{Binding PreviewAppearanceWindowTextBrush}" />
        </Style>

        <Style
            x:Key="SectionHeader"
            BasedOn="{StaticResource SectionHeader}"
            TargetType="{x:Type TextBlock}">
            <Setter Property="Foreground" Value="{Binding PreviewAppearanceWindowHeaderTextBrush}" />
        </Style>

        <Style
            x:Key="SubHeader"
            BasedOn="{StaticResource SubHeader}"
            TargetType="{x:Type TextBlock}">
            <Setter Property="Foreground" Value="{Binding PreviewAppearanceWindowHeaderTextBrush}" />
        </Style>

        <Style TargetType="{x:Type RadioButton}">
            <Setter Property="Foreground" Value="{Binding PreviewAppearanceWindowTextBrush}" />
        </Style>

        <Style TargetType="{x:Type CheckBox}">
            <Setter Property="Foreground" Value="{Binding PreviewAppearanceWindowTextBrush}" />
        </Style>

        <Style TargetType="{x:Type TabControl}">
            <Setter Property="Background" Value="{Binding PreviewAppearanceWindowBackgroundBrush}" />
        </Style>

        <Style TargetType="{x:Type TabItem}">
            <Setter Property="Foreground" Value="{Binding PreviewAppearanceWindowTextBrush}" />
            <Setter Property="Background" Value="{Binding PreviewAppearanceWindowTabBackgroundBrush}" />
            <Setter Property="BorderBrush" Value="{Binding PreviewAppearanceWindowControlBorderBrush}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Padding" Value="10,4" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type TabItem}">
                        <Border
                            x:Name="TabBorder"
                            Padding="{TemplateBinding Padding}"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                ContentSource="Header" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="TabBorder" Property="Background" Value="{Binding PreviewAppearanceWindowTabHoverBackgroundBrush}" />
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="TabBorder" Property="Background" Value="{Binding PreviewAppearanceWindowTabSelectedBackgroundBrush}" />
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.55" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="{x:Type TextBox}">
            <Setter Property="Foreground" Value="{Binding PreviewAppearanceWindowTextBrush}" />
            <Setter Property="Background" Value="{Binding PreviewAppearanceWindowControlBackgroundBrush}" />
            <Setter Property="BorderBrush" Value="{Binding PreviewAppearanceWindowControlBorderBrush}" />
        </Style>

        <Style TargetType="{x:Type Button}">
            <Setter Property="Foreground" Value="{Binding PreviewAppearanceWindowTextBrush}" />
            <Setter Property="Background" Value="{Binding PreviewAppearanceWindowButtonBackgroundBrush}" />
            <Setter Property="BorderBrush" Value="{Binding PreviewAppearanceWindowControlBorderBrush}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Padding" Value="10,4" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border
                            x:Name="ButtonBorder"
                            Padding="{TemplateBinding Padding}"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="ButtonBorder" Property="Background" Value="{Binding PreviewAppearanceWindowButtonHoverBackgroundBrush}" />
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Opacity" Value="0.85" />
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.55" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SwatchButtonStyle" TargetType="{x:Type Button}">
            <Setter Property="Focusable" Value="False" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="BorderBrush" Value="#FF999999" />
            <Setter Property="Background" Value="{x:Null}" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            SnapsToDevicePixels="True" />
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Grid Margin="12" Background="{Binding PreviewBackgroundBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <StackPanel
            Grid.Row="0"
            Margin="0,0,0,12"
            Orientation="Vertical">
            <StackPanel Margin="0,0,0,8" Orientation="Horizontal">
                <TextBlock
                    Margin="0,0,10,0"
                    VerticalAlignment="Center"
                    FontWeight="Bold"
                    Text="Editing:" />
                <RadioButton
                    Margin="0,0,10,0"
                    Content="Dark"
                    GroupName="Theme"
                    IsChecked="{Binding IsEditingDarkMode, Mode=TwoWay}" />
                <RadioButton
                    Content="Light"
                    GroupName="Theme"
                    IsChecked="{Binding IsEditingDarkMode, Mode=TwoWay, Converter={StaticResource InverseBool}}" />
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <TextBlock
                    Margin="0,0,10,0"
                    VerticalAlignment="Center"
                    FontWeight="Bold"
                    Text="Applies to:" />
                <RadioButton
                    Margin="0,0,10,0"
                    Content="Friendly view"
                    GroupName="Target"
                    IsChecked="{Binding IsEditingFriendlyView, Mode=TwoWay}" />
                <RadioButton
                    Content="Raw XML"
                    GroupName="Target"
                    IsChecked="{Binding IsEditingFriendlyView, Mode=TwoWay, Converter={StaticResource InverseBool}}" />
            </StackPanel>
            <StackPanel
                Margin="0,8,0,0"
                HorizontalAlignment="Right"
                Orientation="Horizontal">
                <Button
                    Margin="0,0,8,0"
                    Padding="10,4"
                    Command="{Binding ResetTabToDefaultsCommand}"
                    CommandParameter="{Binding ElementName=AppearanceTabs, Path=SelectedItem.Header}"
                    Content="Reset tab" />
                <Button
                    Padding="10,4"
                    Command="{Binding ResetAllToDefaultsCommand}"
                    Content="Reset all" />
            </StackPanel>
        </StackPanel>
        <DockPanel Grid.Row="1">
            <Border
                Width="210"
                Margin="0,0,12,0"
                Padding="8"
                DockPanel.Dock="Left"
                Background="{Binding PreviewAppearanceWindowControlBackgroundBrush}"
                BorderBrush="{Binding PreviewAppearanceWindowControlBorderBrush}"
                BorderThickness="1">
                <StackPanel>
                    <TextBlock
                        Margin="0,0,0,6"
                        FontWeight="Bold"
                        Foreground="{Binding PreviewAppearanceWindowTextBrush}"
                        Text="Profiles" />
                    <TextBox
                        Margin="0,0,0,6"
                        Text="{Binding ProfileNameInput, UpdateSourceTrigger=PropertyChanged}" />
                    <Button
                        Margin="0,0,0,8"
                        Padding="10,4"
                        Command="{Binding SaveAppearanceProfileCommand}"
                        Content="Save profile" />
                    <ListBox
                        Height="280"
                        ItemsSource="{Binding AppearanceProfiles}"
                        SelectedItem="{Binding SelectedAppearanceProfile, Mode=TwoWay}"
                        DisplayMemberPath="Name"
                        Background="{Binding PreviewAppearanceWindowControlBackgroundBrush}"
                        Foreground="{Binding PreviewAppearanceWindowTextBrush}"
                        BorderBrush="{Binding PreviewAppearanceWindowControlBorderBrush}"
                        BorderThickness="1" />
                    <StackPanel Margin="0,8,0,0" Orientation="Horizontal">
                        <Button
                            Margin="0,0,8,0"
                            Padding="10,4"
                            Command="{Binding ApplyAppearanceProfileCommand}"
                            Content="Load" />
                        <Button
                            Padding="10,4"
                            Command="{Binding DeleteAppearanceProfileCommand}"
                            Content="Delete" />
                    </StackPanel>
                </StackPanel>
            </Border>

            <DockPanel>
                <TabControl
                    x:Name="AppearanceTabs"
                    Margin="0,0,0,8"
                    DockPanel.Dock="Top"
                    SelectionChanged="AppearanceTabs_OnSelectionChanged">
                    <TabItem Header="Fonts" />
                    <TabItem Header="Appearance Window" />
                    <TabItem Header="Shared Config Packs" />
                    <TabItem Header="Compare XML" />
                    <TabItem Header="Backup Browser" />
                    <TabItem Header="Settings &amp; Info" />
                    <TabItem Header="Documentation" />
                    <TabItem Header="LSR XML Guides" />
                    <TabItem Header="Editor" Visibility="{Binding IsEditingFriendlyView, Converter={StaticResource InverseBoolToVis}}" />
                    <TabItem Header="Saved Edits" />
                    <TabItem Header="Top Menu Bar" />
                    <TabItem Header="Top Bar Controls" />
                    <TabItem Header="Pane 1" />
                    <TabItem Header="Pane 2" Visibility="{Binding IsEditingFriendlyView, Converter={StaticResource BoolToVis}}" />
                    <TabItem Header="Pane 3" Visibility="{Binding IsEditingFriendlyView, Converter={StaticResource BoolToVis}}" />
                </TabControl>

                <ScrollViewer x:Name="AppearanceScrollViewer" VerticalScrollBarVisibility="Auto">
                    <StackPanel Orientation="Vertical">
                        <StackPanel x:Name="SectionFontsPanel">
                            <appearanceTabs:AppearanceFontsTab />
                        </StackPanel>
                        <StackPanel x:Name="SectionAppearanceWindowPanel" Visibility="Collapsed">
                            <appearanceTabs:AppearanceWindowTab />
                        </StackPanel>
                        <StackPanel x:Name="SectionSharedConfigPacksPanel" Visibility="Collapsed">
                            <appearanceTabs:AppearanceSharedConfigPacksTab />
                        </StackPanel>
                        <StackPanel x:Name="SectionCompareXmlPanel" Visibility="Collapsed">
                            <appearanceTabs:AppearanceCompareXmlTab />
                        </StackPanel>
                        <StackPanel x:Name="SectionBackupBrowserPanel" Visibility="Collapsed">
                            <appearanceTabs:AppearanceBackupBrowserTab />
                        </StackPanel>
                        <StackPanel x:Name="SectionSettingsInfoPanel" Visibility="Collapsed">
                            <appearanceTabs:AppearanceSettingsInfoTab />
                        </StackPanel>
                        <StackPanel x:Name="SectionDocumentationPanel" Visibility="Collapsed">
                            <appearanceTabs:AppearanceDocumentationTab />
                        </StackPanel>
                        <StackPanel x:Name="SectionXmlGuidesPanel" Visibility="Collapsed">
                            <appearanceTabs:AppearanceXmlGuidesTab />
                        </StackPanel>
                        <StackPanel x:Name="SectionEditorPanel" Visibility="Collapsed">
                            <appearanceTabs:AppearanceEditorTab />
                        </StackPanel>
                        <StackPanel x:Name="SectionSavedEditsPanel" Visibility="Collapsed">
                            <appearanceTabs:AppearanceSavedEditsTab />
                        </StackPanel>
                        <StackPanel Orientation="Vertical" Visibility="{Binding IsEditingRawXml, Converter={StaticResource BoolToVis}}">
                            <StackPanel x:Name="SectionTopMenuRawPanel">
                                <appearanceTabs:AppearanceTopMenuBarRawTab />
                            </StackPanel>
                            <StackPanel x:Name="SectionTopBarRawPanel">
                                <appearanceTabs:AppearanceTopBarControlsRawTab />
                            </StackPanel>
                            <StackPanel x:Name="SectionPane1RawPanel">
                                <appearanceTabs:AppearancePane1RawTab />
                            </StackPanel>
                        </StackPanel>
                        <StackPanel Visibility="{Binding IsEditingFriendlyView, Converter={StaticResource BoolToVis}}">
                            <StackPanel x:Name="SectionTopMenuFriendlyPanel">
                                <appearanceTabs:AppearanceTopMenuBarFriendlyTab />
                            </StackPanel>
                            <StackPanel x:Name="SectionTopBarFriendlyPanel">
                                <appearanceTabs:AppearanceTopBarControlsFriendlyTab />
                            </StackPanel>
                            <StackPanel x:Name="SectionPane1FriendlyPanel">
                                <appearanceTabs:AppearancePane1FriendlyTab />
                            </StackPanel>
                            <StackPanel x:Name="SectionPane2Panel">
                                <appearanceTabs:AppearancePane2Tab />
                            </StackPanel>
                            <StackPanel x:Name="SectionPane3Panel">
                                <appearanceTabs:AppearancePane3Tab />
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </DockPanel>
        </DockPanel>
        <DockPanel Grid.Row="2" LastChildFill="False">
            <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                <Button
                    MinWidth="90"
                    Margin="0,0,8,0"
                    Command="{Binding ApplyCommand}"
                    Content="Apply" />
                <Button
                    MinWidth="90"
                    Margin="0,0,8,0"
                    Command="{Binding OkCommand}"
                    Content="OK" />
                <Button
                    MinWidth="90"
                    Command="{Binding CancelCommand}"
                    Content="Cancel" />
            </StackPanel>
        </DockPanel>
    </Grid>
</Window>
